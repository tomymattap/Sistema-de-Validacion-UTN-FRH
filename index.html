<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validación de Certificados - UTN FRH</title>

    <!-- Carga de fuentes y librerías de íconos -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Hojas de estilo CSS -->
    <link rel="stylesheet" href="CSS/general.css">
    <link rel="stylesheet" href="CSS/inicio.css">
</head>

<body>

    <!-- =======================
        CABECERA (HEADER)
    ======================== -->
    <header class="site-header">
        <div class="header-container">
            <!-- Logo de la UTN -->
            <div class="logo">
                <a href="index.html"><img src="Imagenes/UTNLogo.png" alt="Logo UTN FRH"></a>
            </div>

            <!-- Navegación principal para escritorio -->
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">VALIDAR</a></li>
                    <li><a href="HTML/sobrenosotros.html">SOBRE NOSOTROS</a></li>
                    <li><a href="HTML/contacto.html">CONTACTO</a></li>
                </ul>
            </nav>

            <!-- Controles de sesión (Botón Iniciar Sesión o Menú de Usuario) -->
            <!-- Este div es llenado dinámicamente por JavaScript -->
            <div class="session-controls" id="session-controls">
                <!-- Contenido dinámico por JS -->
            </div>

            <!-- Botón de menú hamburguesa para vista móvil -->
            <button class="hamburger-menu" aria-label="Abrir menú">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- =======================
        MENÚ LATERAL (OFF-CANVAS)
    ======================== -->
    <div class="off-canvas-menu" id="off-canvas-menu">
        <button class="close-btn" aria-label="Cerrar menú">&times;</button>
        <nav>
            <ul>
                <li><a href="index.html">VALIDAR</a></li>
                <li><a href="HTML/sobrenosotros.html">SOBRE NOSOTROS</a></li>
                <li><a href="HTML/contacto.html">CONTACTO</a></li>
                <!-- Sección para el menú de usuario o iniciar sesión en móvil -->
                <li class="has-submenu" id="mobile-session-section">
                    <!-- Contenido dinámico por JS -->
                </li>
            </ul>
        </nav>
    </div>

    <!-- =======================
        CONTENIDO PRINCIPAL
    ======================== -->
    <main id="inicio">
        <!-- Sección Hero con imagen de banner -->
        <section class="hero">
            <img src="Imagenes/banner_inicio.webp" alt="Imagen representativa de la UTN" class="hero-image">
        </section>

        <!-- Sección del formulario de validación -->
        <section class="validation-section">
            <h1>VALIDACIÓN DE CERTIFICADOS UTN – FRH</h1>
            <p>
                Aquí podrás validar la autenticidad de los certificados emitidos por nuestra institución.
                <br>
                El proceso es seguro y garantiza la veracidad de cada documento.
            </p>

            <!-- Formulario que envía el código a PHP para ser validado -->
            <form class="validation-form" action="PHP/validacion.php" method="POST">
                <div class="input-container">
                    <input type="text" id="codigo" name="codigo" placeholder="Ingrese el código alfanumérico de su certificado..." required>
                </div>
                <button type="submit" id="validate-btn">VALIDAR CERTIFICADO</button>
            </form>
        </section>
    </main>

    <!-- =======================
        PIE DE PÁGINA (FOOTER)
    ======================== -->
    <footer class="site-footer">
        <div class="footer-container">
            <!-- Logo e información de contacto -->
            <div class="footer-logo-info">
                <img src="Imagenes/UTNLogo_footer.webp" alt="Logo UTN" class="footer-logo">
                <div class="footer-info">
                    <p>París 532, Haedo (1706)</p>
                    <p>Buenos Aires, Argentina</p>
                    <br>
                    <p>Número de teléfono del depto.</p>
                    <br>
                    <p>extension@frh.utn.edu.ar</p>
                </div>
            </div>
            <!-- Redes sociales y enlaces legales -->
            <div class="footer-social-legal">
                <div class="footer-social">
                    <a href="https://www.youtube.com/@facultadregionalhaedo-utn3647" target="_blank"><i class="fab fa-youtube"></i></a>
                    <a href="https://www.linkedin.com/school/utn-facultad-regional-haedo/" target="_blank"><i class="fab fa-linkedin"></i></a>
                </div>
                <div class="footer-legal">
                    <a href="mailto:extension@frh.utn.edu.ar">Contacto</a>
                    <br> 
                    <a href="#politicas">Políticas de Privacidad</a>
                </div>
            </div>
            <div class="footer-separator"></div>
            <!-- Navegación del pie de página -->
            <div class="footer-nav">
                <h4>Navegación</h4>
                <ul>
                    <li><a href="../index.html">Validar</a></li>
                    <li><a href="HTML/sobrenosotros.html">Sobre Nosotros</a></li>
                    <li><a href="HTML/contacto.html">Contacto</a></li>
                </ul>
            </div>
            <div class="footer-separator"></div>
            <!-- Navegación dinámica (para usuarios logueados) -->
            <div class="footer-dynamic-nav" id="footer-dynamic-nav">
                <!-- Contenido dinámico por JS -->
            </div>
        </div>
    </footer>

    <!-- Botón para volver arriba -->
    <a href="#" class="scroll-to-top-btn" id="scroll-to-top-btn" aria-label="Volver arriba">
        <i class="fas fa-arrow-up"></i>
    </a>

    <!-- =======================
        SCRIPTS
    ======================== -->
    <script src="JavaScript/inicio.js"></script> <!-- Scripts específicos de la página de inicio -->
    <script src="JavaScript/general.js"></script> <!-- Scripts generales para todo el sitio -->
    
    <!-- Script para gestionar la sesión del usuario -->
    <script>
        // Se ejecuta cuando el DOM está completamente cargado
        document.addEventListener('DOMContentLoaded', function() {
            // Petición al servidor para obtener la información del usuario actual
            fetch('PHP/get_user_name.php')
                .then(response => response.json())
                .then(data => {
                    // Elementos del DOM que se van a modificar
                    const sessionControls = document.getElementById('session-controls');
                    const mobileSessionSection = document.getElementById('mobile-session-section');
                    const footerDynamicNav = document.getElementById('footer-dynamic-nav');

                    // Si el usuario está logueado (existe data.user_name)
                    if (data.user_name) {
                        let desktopDropdownMenu, mobileSubmenu, footerMenu;
                        const userName = data.user_name;

                        // Plantilla base para el menú de escritorio
                        const desktopMenu = `
                            <a href="#" class="btn-sesion user-menu-toggle">Hola, ${userName} <i class="fas fa-chevron-down"></i></a>
                            <div class="dropdown-menu"><ul>`;

                        // Si el rol es 1 (Administrador)
                        if (data.user_rol === 1) { 
                            // Menú de escritorio para Admin
                            desktopDropdownMenu = `
                                ${desktopMenu}
                                <li><a href="PHP/ADMIN/gestionarinscriptos.php">Gestionar Inscriptos</a></li>
                                <li><a href="PHP/ADMIN/gestionar_cursos.php">Gestionar Cursos</a></li>
                                <li><a href="PHP/ADMIN/seleccionar_alum_certif.php">Emitir Certificados</a></li>
                                <li><a href="PHP/ADMIN/gestionaradmin.php">Gestionar Administradores</a></li>
                                <li><a href="PHP/logout.php">Cerrar Sesión</a></li>
                            </ul></div>`;

                            // Menú móvil para Admin
                            mobileSubmenu = `
                                <a href="#" class="user-menu-toggle-mobile">Hola, ${userName} <i class="fas fa-chevron-down"></i></a>
                                <ul class="submenu">
                                    <li><a href="PHP/ADMIN/gestionarinscriptos.php">Gestionar Inscriptos</a></li>
                                    <li><a href="PHP/ADMIN/gestionar_cursos.php">Gestionar Cursos</a></li>
                                    <li><a href="PHP/ADMIN/seleccionar_alum_certif.php">Emitir Certificados</a></li>
                                    <li><a href="PHP/ADMIN/gestionaradmin.php">Gestionar Administradores</a></li>
                                    <li><a href="PHP/logout.php">Cerrar Sesión</a></li>
                                </ul>`;

                            // Menú del pie de página para Admin
                            footerMenu = `
                                <h4>Admin</h4>
                                <ul>
                                    <br>
                                    <li><a href="PHP/ADMIN/gestionarinscriptos.php">Gestionar Inscriptos</a></li>
                                    <br>
                                    <li><a href="PHP/ADMIN/gestionar_cursos.php">Gestionar Cursos</a></li>
                                    <br>
                                    <li><a href="PHP/ADMIN/seleccionar_alum_certif.php">Emitir Certificados</a></li>
                                    <br>
                                    <li><a href="PHP/ADMIN/gestionaradmin.php">Gestionar Administradores</a></li>
                                </ul>`;

                        // Si el rol es 2 (Alumno)
                        } else if (data.user_rol === 2) { 
                            // Menú de escritorio para Alumno
                            desktopDropdownMenu = `
                                ${desktopMenu}
                                <br>
                                <li><a href="PHP/ALUMNO/perfil.php">Mi Perfil</a></li>
                                <br>
                                <li><a href="PHP/ALUMNO/inscripciones.php">Inscripciones</a></li>
                                <br>
                                <li><a href="PHP/ALUMNO/certificaciones.php">Certificaciones</a></li>
                                <br>
                                <li><a href="PHP/logout.php">Cerrar Sesión</a></li>
                            </ul></div>`;

                            // Menú móvil para Alumno
                            mobileSubmenu = `
                                <a href="#" class="user-menu-toggle-mobile">Hola, ${userName} <i class="fas fa-chevron-down"></i></a>
                                <ul class="submenu">
                                    <li><a href="PHP/ALUMNO/perfil.php">Mi Perfil</a></li>
                                    <li><a href="PHP/ALUMNO/inscripciones.php">Inscripciones</a></li>
                                    <li><a href="PHP/ALUMNO/certificaciones.php">Certificaciones</a></li>
                                    <li><a href="PHP/logout.php">Cerrar Sesión</a></li>
                                </ul>`;

                            // Menú del pie de página para Alumno
                            footerMenu = `
                                <h4>Alumno</h4>
                                <ul>
                                    <li><a href="PHP/ALUMNO/perfil.php">Mi Perfil</a></li>
                                    <li><a href="PHP/ALUMNO/inscripciones.php">Inscripciones</a></li>
                                    <li><a href="PHP/ALUMNO/certificaciones.php">Certificaciones</a></li>
                                </ul>`;
                        }

                        // Inserta el HTML generado en los contenedores correspondientes
                        sessionControls.innerHTML = desktopDropdownMenu;
                        mobileSessionSection.innerHTML = mobileSubmenu;
                        footerDynamicNav.innerHTML = footerMenu;

                    } else {
                        // Si el usuario NO está logueado
                        // Muestra el botón "INICIAR SESIÓN" en la cabecera, menú móvil y pie de página
                        sessionControls.innerHTML = '<a href="PHP/iniciosesion.php" class="btn-sesion">INICIAR SESIÓN</a>';
                        mobileSessionSection.innerHTML = '<a href="PHP/iniciosesion.php">INICIAR SESIÓN</a>';
                        footerDynamicNav.innerHTML = '<h4>Acceso</h4><br><ul><li><a href="PHP/iniciosesion.php">Iniciar Sesión</a></li></ul>';
                    }
                });
        });
    </script>
</body>
</html>
